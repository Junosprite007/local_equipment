define("local_equipment/debug-utils",["exports","core/log"],(function(_exports,_log){var obj;
/**
   * Debug utilities for local_equipment plugin
   *
   * @module     local_equipment/debug-utils
   * @copyright  2024 onwards Joshua Kirby <josh@funlearningcompany.com>
   * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later
   */Object.defineProperty(_exports,"__esModule",{value:!0}),_exports.debugTiming=_exports.debugObjectTable=_exports.debugNetworkRequest=_exports.debugGroup=_exports.debugError=_exports.debugEnvironment=_exports.debugAjaxResponse=_exports.conditionalDebug=void 0,_log=(obj=_log)&&obj.__esModule?obj:{default:obj};const isDeveloperMode=()=>{var _window$M,_window$M$cfg;return(null===(_window$M=window.M)||void 0===_window$M||null===(_window$M$cfg=_window$M.cfg)||void 0===_window$M$cfg?void 0:_window$M$cfg.developerdebug)||document.body.classList.contains("debug")||"true"===localStorage.getItem("moodle_debug")};_exports.debugAjaxResponse=function(context,data){let extra=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},level=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"full";const timestamp=(new Date).toISOString();console.group("üêõ AJAX Debug: ".concat(context," - ").concat(timestamp));const summary={"Response Type":typeof data,"Is Object":"object"==typeof data&&null!==data,"Keys Count":data?Object.keys(data).length:0,"Has Success":data&&"success"in data,"Success Value":data?data.success:"N/A","Success Type":data?typeof data.success:"N/A","Has Message":data&&"message"in data,"Has Error":data&&"error"in data,"Has Exception":data&&"exception"in data,...extra};if(console.table(summary),("verbose"===level||"full"===level)&&data&&"object"==typeof data){console.group("üìÑ Response Data"),console.table(data),console.groupEnd(),console.group("üè∑Ô∏è Property Types");const types={};Object.keys(data).forEach((key=>{types[key]={type:typeof data[key],hasValue:null!==data[key]&&void 0!==data[key],length:data[key]&&data[key].length?data[key].length:"N/A"}})),console.table(types),console.groupEnd()}"full"===level&&(console.group("üìã Copy-able JSON"),console.log(JSON.stringify(data,null,2)),console.groupEnd(),(Error.captureStackTrace||(new Error).stack)&&(console.group("üìç Stack Trace"),console.trace("Debug point location"),console.groupEnd())),console.groupEnd(),_log.default.debug("AJAX Debug - ".concat(context),{summary:summary,data:data,extra:extra})};_exports.debugObjectTable=function(title,obj){let columns=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;console.group("üìä ".concat(title)),obj&&"object"==typeof obj?columns&&Array.isArray(columns)?console.table(obj,columns):console.table(obj):console.log("Object is not debuggable:",typeof obj,obj),console.groupEnd()};_exports.debugGroup=function(title,sections){let collapsed=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const groupMethod=collapsed?console.groupCollapsed:console.group;groupMethod("üîç ".concat(title)),Object.keys(sections).forEach((sectionTitle=>{const content=sections[sectionTitle];console.group(sectionTitle),"object"==typeof content&&null!==content?console.table(content):console.log(content),console.groupEnd()})),console.groupEnd()};_exports.debugError=function(errorType,message){let context=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},originalError=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;console.group("‚ùå Error: ".concat(errorType)),console.table({"Error Type":errorType,Message:message,Timestamp:(new Date).toISOString(),"User Agent":navigator.userAgent.substring(0,50)+"...",URL:window.location.href,"Has Context":Object.keys(context).length>0,"Has Original Error":null!==originalError}),Object.keys(context).length>0&&(console.group("üîç Context Data"),console.table(context),console.groupEnd()),originalError&&(console.group("‚ö†Ô∏è Original Error"),console.error(originalError),originalError.stack&&console.log("Stack:",originalError.stack),console.groupEnd()),console.groupEnd(),_log.default.error("".concat(errorType,": ").concat(message),{context:context,originalError:originalError?{name:originalError.name,message:originalError.message,stack:originalError.stack}:null})};_exports.debugNetworkRequest=(endpoint,requestData,responseData,duration,success)=>{const icon=success?"‚úÖ":"‚ùå",status=success?"SUCCESS":"FAILED";console.group("".concat(icon," Network Request: ").concat(endpoint," - ").concat(status)),console.table({Endpoint:endpoint,Method:"POST","Duration (ms)":duration,Success:success,"Request Size":JSON.stringify(requestData).length+" bytes","Response Size":JSON.stringify(responseData).length+" bytes",Timestamp:(new Date).toISOString()}),console.group("üì§ Request Data"),console.table(requestData),console.groupEnd(),console.group("üì• Response Data"),console.table(responseData),console.groupEnd(),console.groupEnd()};_exports.debugTiming=async(operation,callback)=>{const startTime=performance.now();console.time("‚è±Ô∏è ".concat(operation));try{const result=await callback(),duration=performance.now()-startTime;return console.timeEnd("‚è±Ô∏è ".concat(operation)),console.log("‚úÖ ".concat(operation," completed in ").concat(duration.toFixed(2),"ms")),result}catch(error){const duration=performance.now()-startTime;throw console.timeEnd("‚è±Ô∏è ".concat(operation)),console.error("‚ùå ".concat(operation," failed after ").concat(duration.toFixed(2),"ms:"),error),error}};_exports.debugEnvironment=()=>{if(console.group("üåê Environment Debug Information"),console.table({"User Agent":navigator.userAgent,Platform:navigator.platform,Language:navigator.language,Online:navigator.onLine,"Cookies Enabled":navigator.cookieEnabled,"Do Not Track":navigator.doNotTrack,"Screen Resolution":"".concat(screen.width,"x").concat(screen.height),"Color Depth":screen.colorDepth,"Timezone Offset":(new Date).getTimezoneOffset()}),window.M&&(console.group("üéì Moodle Environment"),console.table({"Moodle Version":window.M.cfg.version||"Unknown","WWW Root":window.M.cfg.wwwroot,Theme:window.M.cfg.theme,"Developer Debug":window.M.cfg.developerdebug,"Session Name":window.M.cfg.sesskey?"Present":"Missing","User ID":window.M.cfg.userid||"Not logged in"}),console.groupEnd()),window.performance){console.group("‚ö° Performance Info");const navigation=performance.getEntriesByType("navigation")[0];navigation&&console.table({"DOM Content Loaded":"".concat(navigation.domContentLoadedEventEnd.toFixed(2),"ms"),"Load Complete":"".concat(navigation.loadEventEnd.toFixed(2),"ms"),"DNS Lookup":"".concat((navigation.domainLookupEnd-navigation.domainLookupStart).toFixed(2),"ms"),"Connection Time":"".concat((navigation.connectEnd-navigation.connectStart).toFixed(2),"ms"),"Response Time":"".concat((navigation.responseEnd-navigation.responseStart).toFixed(2),"ms")}),console.groupEnd()}console.groupEnd()};const conditionalDebug={dev:function(){if(isDeveloperMode()){for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];console.log("üõ†Ô∏è [DEV]",...args)}},prod:function(){if(!isDeveloperMode()){for(var _len2=arguments.length,args=new Array(_len2),_key2=0;_key2<_len2;_key2++)args[_key2]=arguments[_key2];console.log("üè≠ [PROD]",...args)}},always:function(){const env=isDeveloperMode()?"DEV":"PROD";for(var _len3=arguments.length,args=new Array(_len3),_key3=0;_key3<_len3;_key3++)args[_key3]=arguments[_key3];console.log("üåç [".concat(env,"]"),...args)}};_exports.conditionalDebug=conditionalDebug}));

//# sourceMappingURL=debug-utils.min.js.map