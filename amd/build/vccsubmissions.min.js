define("local_equipment/vccsubmissions",["exports","jquery","core/ajax","core/notification","core/str"],(function(_exports,_jquery,_ajax,_notification,_str){function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}
/**
   * JavaScript for managing consents.
   *
   * @module     local_equipment/manage_consents
   * @copyright  2024 Joshua Kirby <josh@funlearningcompany.com>
   * @license    https://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later
   */Object.defineProperty(_exports,"__esModule",{value:!0}),_exports.init=void 0,_jquery=_interopRequireDefault(_jquery),_ajax=_interopRequireDefault(_ajax),_notification=_interopRequireDefault(_notification);_exports.init=()=>{setupViewNotes(),setupAddNote()};const setupViewNotes=()=>{(0,_jquery.default)(".view-notes").on("click",(e=>{e.preventDefault();const consentId=(0,_jquery.default)(e.currentTarget).data("id");_ajax.default.call([{methodname:"local_equipment_get_consent_notes",args:{consentid:consentId},done:notes=>{(0,_jquery.default)("#note-modal .modal-body").html(notes),(0,_jquery.default)("#note-modal").modal("show")},fail:_notification.default.exception}])}))},setupAddNote=()=>{(0,_jquery.default)(".add-note").on("click",(e=>{e.preventDefault();const consentId=(0,_jquery.default)(e.currentTarget).data("id");(0,_jquery.default)("#note-modal .modal-body").html('<textarea id="admin-note" class="form-control" rows="5"></textarea>'),(0,_jquery.default)("#note-modal").modal("show"),(0,_jquery.default)("#save-note").off("click").on("click",(()=>{const note=(0,_jquery.default)("#admin-note").val();_ajax.default.call([{methodname:"local_equipment_add_consent_note",args:{consentid:consentId,note:note},done:()=>{(0,_jquery.default)("#note-modal").modal("hide"),(0,_str.get_string)("notesaved","local_equipment").then((s=>{_notification.default.addNotification({message:s,type:"success"})})).catch(_notification.default.exception)},fail:_notification.default.exception}])}))}))}}));

//# sourceMappingURL=vccsubmissions.min.js.map