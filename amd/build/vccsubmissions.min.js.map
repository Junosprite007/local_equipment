{"version":3,"file":"vccsubmissions.min.js","sources":["../src/vccsubmissions.js"],"sourcesContent":["// This file is part of FLIP Plugins for Moodle\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <https://www.gnu.org/licenses/>.\n\n/**\n * JavaScript for managing consents.\n *\n * @module     local_equipment/manage_consents\n * @copyright  2024 Joshua Kirby <josh@funlearningcompany.com>\n * @license    https://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n */\n\nimport $ from 'jquery';\nimport Ajax from 'core/ajax';\nimport Notification from 'core/notification';\nimport { get_string as getString } from 'core/str';\n\n/**\n * Initialize the manage consents functionality.\n */\nexport const init = () => {\n    setupViewNotes();\n    setupAddNote();\n};\n\n/**\n * Set up view notes functionality.\n */\nconst setupViewNotes = () => {\n    $('.view-notes').on('click', (e) => {\n        e.preventDefault();\n        const consentId = $(e.currentTarget).data('id');\n        Ajax.call([\n            {\n                methodname: 'local_equipment_get_consent_notes',\n                args: { consentid: consentId },\n                done: (notes) => {\n                    $('#note-modal .modal-body').html(notes);\n                    $('#note-modal').modal('show');\n                },\n                fail: Notification.exception,\n            },\n        ]);\n    });\n};\n\n/**\n * Set up add note functionality.\n */\nconst setupAddNote = () => {\n    $('.add-note').on('click', (e) => {\n        e.preventDefault();\n        const consentId = $(e.currentTarget).data('id');\n        $('#note-modal .modal-body').html(\n            '<textarea id=\"admin-note\" class=\"form-control\" rows=\"5\"></textarea>'\n        );\n        $('#note-modal').modal('show');\n\n        $('#save-note')\n            .off('click')\n            .on('click', () => {\n                const note = $('#admin-note').val();\n                Ajax.call([\n                    {\n                        methodname: 'local_equipment_add_consent_note',\n                        args: { consentid: consentId, note: note },\n                        done: () => {\n                            $('#note-modal').modal('hide');\n                            getString('notesaved', 'local_equipment')\n                                .then((s) => {\n                                    Notification.addNotification({\n                                        message: s,\n                                        type: 'success',\n                                    });\n                                })\n                                .catch(Notification.exception);\n                        },\n                        fail: Notification.exception,\n                    },\n                ]);\n            });\n    });\n};\n"],"names":["setupViewNotes","setupAddNote","on","e","preventDefault","consentId","currentTarget","data","call","methodname","args","consentid","done","notes","html","modal","fail","Notification","exception","off","note","val","then","s","addNotification","message","type","catch"],"mappings":";;;;;;;gOA+BoB,KAChBA,iBACAC,sBAMED,eAAiB,yBACjB,eAAeE,GAAG,SAAUC,IAC1BA,EAAEC,uBACIC,WAAY,mBAAEF,EAAEG,eAAeC,KAAK,oBACrCC,KAAK,CACN,CACIC,WAAY,oCACZC,KAAM,CAAEC,UAAWN,WACnBO,KAAOC,4BACD,2BAA2BC,KAAKD,2BAChC,eAAeE,MAAM,SAE3BC,KAAMC,sBAAaC,iBAS7BjB,aAAe,yBACf,aAAaC,GAAG,SAAUC,IACxBA,EAAEC,uBACIC,WAAY,mBAAEF,EAAEG,eAAeC,KAAK,0BACxC,2BAA2BO,KACzB,2FAEF,eAAeC,MAAM,4BAErB,cACGI,IAAI,SACJjB,GAAG,SAAS,WACHkB,MAAO,mBAAE,eAAeC,oBACzBb,KAAK,CACN,CACIC,WAAY,mCACZC,KAAM,CAAEC,UAAWN,UAAWe,KAAMA,MACpCR,KAAM,yBACA,eAAeG,MAAM,4BACb,YAAa,mBAClBO,MAAMC,0BACUC,gBAAgB,CACzBC,QAASF,EACTG,KAAM,eAGbC,MAAMV,sBAAaC,YAE5BF,KAAMC,sBAAaC"}