define("local_equipment/editpartnership_form",["exports","jquery","core/log","core/str"],(function(_exports,_jquery,_log,_str){function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}
/**
   * JavaScript for handling partnership course list functionality
   *
   * @module     local_equipment/editpartnership_form
   * @copyright  2024 Josh Kirby <josh@funlearningcompany.com>
   * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later
   */Object.defineProperty(_exports,"__esModule",{value:!0}),_exports.init=void 0,_jquery=_interopRequireDefault(_jquery),_log=_interopRequireDefault(_log);_exports.init=async()=>{const $partnershipSelect=(0,_jquery.default)("#id_partnershipcourselist"),$coursesData=(0,_jquery.default)("#id_coursesthisyear"),coursesContainer=(0,_jquery.default)("<div>").addClass("local-equipment_partnership-courses-container mt-3");$partnershipSelect.after(coursesContainer);const strings=await Promise.all([(0,_str.get_string)("errorparsingcoursesdata","local_equipment"),(0,_str.get_string)("nocoursesfoundforthispartnership","local_equipment"),(0,_str.get_string)("courseid","local_equipment"),(0,_str.get_string)("coursename","local_equipment"),(0,_str.get_string)("totalcourses","local_equipment")]),[errorParsingData,noCoursesFound,courseIdLabel,courseNameLabel,totalCoursesLabel]=strings;let coursesData;try{coursesData=JSON.parse($coursesData.attr("data-coursesthisyear"))}catch(e){return void _log.default.error(errorParsingData,e)}const displayPartnershipCourses=partnershipId=>{coursesContainer.empty();const partnershipCourses=coursesData[partnershipId];partnershipCourses&&0!==Object.keys(partnershipCourses).length||coursesContainer.html('<div class="alert alert-warning">'.concat(noCoursesFound,"</div>"));const $mainContainer=(0,_jquery.default)("<div>").addClass("local-equipment_main-courses-container"),$header=(0,_jquery.default)("<div>").addClass("local-equipment_courses-header d-flex").append((0,_jquery.default)("<div>").addClass("local-equipment_course-id-col").text(courseIdLabel),(0,_jquery.default)("<div>").addClass("local-equipment_course-name-col").text(courseNameLabel)),$scrollContent=(0,_jquery.default)("<div>").addClass("local-equipment_courses-scroll-content"),sortedCourseIds=Object.keys(partnershipCourses).sort(((a,b)=>parseInt(a)-parseInt(b)));sortedCourseIds.forEach((courseId=>{(0,_jquery.default)("<div>").addClass("local-equipment_course-row d-flex").append((0,_jquery.default)("<div>").addClass("local-equipment_course-id-col").text(courseId),(0,_jquery.default)("<div>").addClass("local-equipment_course-name-col").text(partnershipCourses[courseId])).appendTo($scrollContent)}));const courseCount=sortedCourseIds.length,$footer=(0,_jquery.default)("<div>").addClass("local-equipment_courses-footer").text("".concat(totalCoursesLabel,": ").concat(courseCount));$mainContainer.append($header).append($scrollContent).append($footer),coursesContainer.append($mainContainer)};$partnershipSelect.on("change",(function(){const selectedPartnership=(0,_jquery.default)(this).val();selectedPartnership?displayPartnershipCourses(selectedPartnership):coursesContainer.empty()}));const initialPartnership=$partnershipSelect.val();initialPartnership&&displayPartnershipCourses(initialPartnership)}}));

//# sourceMappingURL=editpartnership_form.min.js.map