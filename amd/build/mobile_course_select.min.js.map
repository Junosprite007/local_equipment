{"version":3,"file":"mobile_course_select.min.js","sources":["../src/mobile_course_select.js"],"sourcesContent":["// This file is part of FLIP Plugins for Moodle\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <https://www.gnu.org/licenses/>.\n\n/**\n * JavaScript for the add partnerships form.\n *\n * @module     local_equipment/mobile_course_select\n * @copyright  2024 Joshua Kirby <josh@funlearningcompany.com>\n * @license    https://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n */\n\n/**\n * Initialize the course multi-select box for mobile.\n */\nexport const init = () => {\n    replaceMobileSelect();\n};\n\nconst isMobile = () => {\n    return /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(\n        navigator.userAgent\n    );\n};\n\nconst createCheckboxes = (select) => {\n    const container = document.createElement('div');\n    container.className = 'mobile-course-checkboxes';\n\n    Array.from(select.options).forEach((option) => {\n        const checkbox = document.createElement('input');\n        checkbox.type = 'checkbox';\n        checkbox.value = option.value;\n        checkbox.id = `course-${option.value}`;\n        checkbox.name = 'student_courses[]';\n\n        const label = document.createElement('label');\n        label.htmlFor = `course-${option.value}`;\n        label.textContent = option.textContent;\n\n        const wrapper = document.createElement('div');\n        wrapper.appendChild(checkbox);\n        wrapper.appendChild(label);\n\n        container.appendChild(wrapper);\n    });\n\n    return container;\n};\n\nconst replaceMobileSelect = () => {\n    if (isMobile()) {\n        const selects = document.querySelectorAll(\n            'select[name=\"student_courses[]\"]'\n        );\n        selects.forEach((select) => {\n            const checkboxes = createCheckboxes(select);\n            select.parentNode.replaceChild(checkboxes, select);\n        });\n    }\n};\n"],"names":["replaceMobileSelect","test","navigator","userAgent","document","querySelectorAll","forEach","select","checkboxes","container","createElement","className","Array","from","options","option","checkbox","type","value","id","name","label","htmlFor","textContent","wrapper","appendChild","createCheckboxes","parentNode","replaceChild"],"mappings":"yKA0BoB,KAChBA,6BAkCEA,oBAAsB,QA9BjB,iEAAiEC,KACpEC,UAAUC,WA8BE,CACIC,SAASC,iBACrB,oCAEIC,SAASC,eACPC,WA/BQD,CAAAA,eAChBE,UAAYL,SAASM,cAAc,cACzCD,UAAUE,UAAY,2BAEtBC,MAAMC,KAAKN,OAAOO,SAASR,SAASS,eAC1BC,SAAWZ,SAASM,cAAc,SACxCM,SAASC,KAAO,WAChBD,SAASE,MAAQH,OAAOG,MACxBF,SAASG,oBAAeJ,OAAOG,OAC/BF,SAASI,KAAO,0BAEVC,MAAQjB,SAASM,cAAc,SACrCW,MAAMC,yBAAoBP,OAAOG,OACjCG,MAAME,YAAcR,OAAOQ,kBAErBC,QAAUpB,SAASM,cAAc,OACvCc,QAAQC,YAAYT,UACpBQ,QAAQC,YAAYJ,OAEpBZ,UAAUgB,YAAYD,YAGnBf,WASoBiB,CAAiBnB,QACpCA,OAAOoB,WAAWC,aAAapB,WAAYD"}