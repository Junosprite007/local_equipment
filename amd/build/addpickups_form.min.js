/**
 * JavaScript for managing multiple pickups in the add pickups form.
 *
 * @module      local_equipment/addpickup_form
 * @copyright   2024 onward Joshua Kirby <josh@funlearningcompany.com>
 * @author      Joshua Kirby - CTO @ Fun Learning Company - funlearningcompany.com
 * @license     https://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later
 */
define("local_equipment/addpickups_form",["jquery","core/str"],(function($,Str){return{init:function(){var module=this;$(document).ready((function(){module.updatePickupNumbers(),module.updateTrashIcons(),$(document).on("click",".local-equipment-remove-pickup",(function(e){e.preventDefault(),module.removePickup($(this))})),$("#id_addpickup").on("click",(function(){setTimeout((function(){module.updatePickupNumbers(),module.updateTrashIcons()}),100)}))}))},updatePickupNumbers:function(){$(".local-equipment-pickup-header").each((function(index){Str.get_string("pickup","local_equipment",index+1).then(function(string){$(this).text(string)}.bind(this))}))},updateTrashIcons:function(){$('fieldset[id^="id_pickupheader_"]').length>1?$(".local-equipment-remove-pickup").show():$(".local-equipment-remove-pickup").hide()},removePickup:function(button){button.closest("fieldset").remove(),this.updatePickupNumbers(),this.updateTrashIcons(),this.updateHiddenFields()},updateHiddenFields:function(){var pickupCount=$('fieldset[id^="id_pickupheader_"]').length;$('input[name="pickups"]').val(pickupCount);var url=new URL(window.location.href);url.searchParams.set("repeatno",pickupCount),window.history.replaceState({},"",url)}}}));

//# sourceMappingURL=addpickups_form.min.js.map