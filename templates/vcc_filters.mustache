{{!
    This file is part of FLIP Plugins for Moodle

    Moodle is free software: you can redistribute it and/or modify
    it under the terms of the GNU General Public License as published by
    the Free Software Foundation, either version 3 of the License, or
    (at your option) any later version.

    Moodle is distributed in the hope that it will be useful,
    but WITHOUT ANY WARRANTY; without even the implied warranty of
    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
    GNU General Public License for more details.

    You should have received a copy of the GNU General Public License
    along with Moodle.  If not, see <http://www.gnu.org/licenses/>.
}}
{{!
    @template local_equipment/vcc_filters

    Template for the VCC filters with improved layout and collapsible functionality.

    Context variables:
    * form - The filter form HTML
    * has_filters - Boolean indicating if filters are applied
    * filter_count - Number of active filters
    * is_collapsed - Boolean indicating if filters should start collapsed
}}

<div class="card mb-4 vcc-filters-card">
    <div class="card-header">
        <div class="d-flex justify-content-between align-items-center">
            <div class="d-flex align-items-center">
                <button
                    class="btn btn-link p-0 border-0 text-decoration-none d-flex align-items-center"
                    type="button"
                    data-bs-toggle="collapse"
                    data-bs-target="#vcc-filters-collapse"
                    aria-expanded="{{^is_collapsed}}true{{/is_collapsed}}{{#is_collapsed}}false{{/is_collapsed}}"
                    aria-controls="vcc-filters-collapse"
                    title="{{#str}}togglefilters, local_equipment{{/str}}"
                >
                    <i class="fa fa-filter me-2" aria-hidden="true"></i>
                    <h5 class="card-title mb-0 me-2">{{#str}}filters, local_equipment{{/str}}</h5>
                    <i class="fa fa-chevron-down collapse-icon" aria-hidden="true"></i>
                </button>
            </div>
            <div class="d-flex align-items-center gap-2">
                {{#has_filters}}
                <span class="badge text-bg-primary d-flex align-items-center">
                    <i class="fa fa-check-circle me-1" aria-hidden="true"></i>
                    {{#filter_count}}{{filter_count}} {{#str}}filtersactive, local_equipment{{/str}}{{/filter_count}}
                    {{^filter_count}}{{#str}}filtersapplied, local_equipment{{/str}}{{/filter_count}}
                </span>
                {{/has_filters}}
                {{^has_filters}}
                <small class="text-muted">{{#str}}nofiltersapplied, local_equipment{{/str}}</small>
                {{/has_filters}}
            </div>
        </div>
    </div>
    <div class="collapse {{^is_collapsed}}show{{/is_collapsed}}" id="vcc-filters-collapse">
        <div class="card-body">
            <div class="vcc-filter-form-container">
                {{{form}}}
            </div>
        </div>
    </div>
</div>
